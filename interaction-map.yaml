# System 간 상호작용 맵
# AI 에이전트가 "이 System을 수정하면 어디에 영향을 주는지" 즉시 파악하기 위한 문서
# System 추가/수정 시 반드시 이 파일도 갱신

version: session_2

# 현재 등록된 System과 실행 순서
systems_execution_order:
  - name: NetworkSystem
    order: 1
    purpose: "IOCP 이벤트 → ECS Entity/Component 변환"
    reads: []
    writes: [SessionComponent, RecvBufferComponent]
    side_effects: ["Entity 생성 (접속)", "Entity 파괴 (끊김)"]

  - name: MessageDispatchSystem
    order: 2
    purpose: "RecvBuffer에서 완성 패킷 조립 → 타입별 핸들러 호출"
    reads: [SessionComponent, RecvBufferComponent]
    writes: []
    side_effects: ["핸들러 콜백 호출", "잘못된 패킷 시 연결 끊기"]

# System 간 데이터 흐름
data_flows:
  - from: NetworkSystem
    to: MessageDispatchSystem
    via: RecvBufferComponent
    description: "NetworkSystem이 IOCP 수신 데이터를 RecvBuffer에 적재 → MessageDispatchSystem이 꺼내서 패킷으로 조립"

# 향후 추가 예정 (커리큘럼 기반)
# Session 3: MovementSystem, BroadcastSystem
# Session 4: InterestSystem
# Session 5: ChannelSystem
# Session 6: ZoneSystem
# Session 7: HandoffSystem
# Session 8: GhostSystem
