# ============================================================
# Server Agent 영속 상태 — 세션 간 컨텍스트 유지용
# agent_loop.py가 Claude 실행 시 이 파일을 강제 주입
# 매 작업 완료 후 Claude가 이 파일을 업데이트
# ============================================================

agent: server
project_root: "C:\\Users\\gnidev0095\\OneDrive\\바탕 화면\\Lost\\GameServerSkeleton"
last_session: "2026-02-16T09:00:00"

# ── 현재 상태 ──
current_status: "GDD 서버+클라 100% MILESTONE! 서버 142/142 ALL PASS + 클라 115 PASS. 17개 TASK 양쪽 전부 DONE. C038 확인 완료(S058). 다음: 대표님 결정 대기 — Unity 통합테스트(최우선) / 밸런싱 / 엔티티 파이프라인 리뷰 / 추가 컨텐츠."

# ── 완료된 작업 ──
completed:
  - id: S001-S010
    desc: "초기 통신 체계 구축, protocol.yaml, Phase 0/1 협의"
    files: ["_comms/server_to_client/S001~S010"]
  - id: S011-S015
    desc: "야근 #1~5: 채팅/장비스탯/상점/스킬확장/보스메카닉"
    files: ["ChatComponents.h", "ShopComponents.h", "SkillComponents.h", "BossComponents.h"]
  - id: S016-S018
    desc: "이동검증 Model C, 몬스터 AI 6상태FSM, 데이터드리븐+핫리로드"
    files: ["MonsterAISystem.h", "GameConfig.h", "ConfigLoader.h"]
  - id: S019
    desc: "서버 현황 총정리 + 신규 패킷 23개 한방 정리"
    files: ["_comms/server_to_client/S019*"]
  - id: S020
    desc: "TCP 브릿지 서버 v1.0 구현 (asyncio, 포트 7777, 20 PASS)"
    files: ["Servers/BridgeServer/tcp_bridge.py", "test_tcp_bridge.py"]
  - id: S021-S028
    desc: "포맷 불일치 수정, enum 버그 6건 수정, 비주얼 프로토타입 에셋 안내"
    files: ["tcp_bridge.py", "test_tcp_bridge.py"]
  - id: S029
    desc: "문파/거래/우편 3대 시스템 구현 (Session 38-40, MsgType 290-318)"
    files: ["tcp_bridge.py"]
  - id: S030
    desc: "GDD 시스템 21파일 9000줄 완성"
    files: ["_gdd/rules/*.yaml", "_gdd/game_design.yaml"]
  - id: S031
    desc: "C016 응답: CEO 카메라 결정(쿼터뷰)+GDD 크로스파일 8건 수정+엔티티 파이프라인 보류"
    files: ["_gdd/rules/combat.yaml", "_gdd/rules/ui.yaml", "_gdd/rules/items.yaml", "_gdd/rules/ai_behavior.yaml", "_gdd/rules/flow.yaml", "_comms/conversation_journal.json"]
  - id: S032
    desc: "GDD 데이터 DB 5개 CSV 생성 — monsters(20종)/skills(30개)/items(50+)/quests(25개)/npcs(18명)"
    files: ["_gdd/data/monsters.csv", "_gdd/data/skills.csv", "_gdd/data/items.csv", "_gdd/data/quests.csv", "_gdd/data/npcs.csv"]
  - id: S033
    desc: "P1 패킷 3종: SERVER_LIST(320-321)/CHARACTER_CRUD(322-327)/TUTORIAL(330-331). 23/23 PASS."
    files: ["Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "Servers/BridgeServer/_patch.py"]
  - id: S034
    desc: "GDD 서버 태스크 4건: 튜토리얼 몬스터(P1_S02_S01)/NPC 대화(P1_S04_S01,332-333)/마을 NPC(P1_S05_S01)/강화(P2_S02_S01,340-341). 28/28 PASS."
    files: ["Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "Servers/BridgeServer/_patch_s034.py"]
  - id: S035
    desc: "GDD 서버 태스크 2건: 필드 몬스터 확장(P2_S01_S01, zone1-3 총 30마리)+던전 매칭(P2_S03_S01, MATCH/INSTANCE 핸들러 6개+던전 4종). 34/34 PASS."
    files: ["Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "Servers/BridgeServer/_patch_s035.py"]
  - id: S036
    desc: "GDD P3 서버 태스크 2건: PvP 아레나(P3_S01_S01, 1v1/3v3 매칭+스탯정규화+ELO+승패판정, MsgType 350-359)+레이드 보스 기믹(P3_S02_S01, 3페이즈+기믹6종+enrage+클리어보상, MsgType 370-379). 46/46 PASS."
    files: ["Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "Servers/BridgeServer/_patch_s036.py"]
  - id: S037
    desc: "인벤토리 테스트 #10 리그레션 수정 — TestClient.recv_expect() 추가로 몬스터 스폰 패킷 간섭 해결. 46/46 PASS."
    files: ["Servers/BridgeServer/_patch_s037.py"]
  - id: S035_msg
    desc: "C019 응답: S033/S034 연동 확인 + Phase 2 TCP 브릿지 테스트 가이드 전달."
    files: ["_comms/server_to_client/S035_c019_response_phase2_ready.md"]
  - id: S038
    desc: "C020 응답: Phase 2 TCP 실연동 14/14 ALL PASS. test_phase2_tcp.py 11-step 전체 통과. Phase 2 공식 완료."
    files: ["_comms/server_to_client/S038_c020_response_phase2_tcp_test_passed.md"]
  - id: S039
    desc: "Hub v2.0 이벤트 기반 시스템 전환 알림"
    files: ["_comms/server_to_client/S039_hub_v2_upgrade_event_driven.md"]
  - id: S040
    desc: "C021 응답: Phase 3 브릿지 호환성 패치 + Guild/Trade/Mail TCP 14/14 ALL PASS + GDD 심화 태스크 분해. _patch_s040.py 듀얼 포맷 5건 수정. 총 60/60 PASS."
    files: ["Servers/BridgeServer/_patch_s040.py", "Servers/BridgeServer/test_phase3_tcp.py", "_comms/server_to_client/S040_c021_response_phase3_bridge_compat.md"]
  - id: S041
    desc: "C022 응답: Phase 3 PvP/Raid TCP 연동 20/20 ALL PASS. test_phase3_pvp_raid_tcp.py 작성. 총 80/80 ALL PASS. Phase 3 완전 완료!"
    files: ["Servers/BridgeServer/test_phase3_pvp_raid_tcp.py", "_comms/server_to_client/S041_c022_response_phase3_pvp_raid_80_80.md"]
  - id: S042
    desc: "TASK 2 제작/채집/요리/인챈트 시스템 구현. MsgType 380-389. 핸들러 5개(CRAFT_LIST/CRAFT_EXECUTE/GATHER_START/COOK_EXECUTE/ENCHANT_REQ) + 테스트 10개. 56/56 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s042.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py"]
  - id: S043
    desc: "C023/C023_s041/C024 응답: TASK 2 완료 알림. 클라이언트 GROUP G TASK 2 UI 작업 가능(CraftingUI/GatheringUI/CookingUI/EnchantUI). 서버 TASK 3 착수 예정."
    files: ["_comms/server_to_client/S043_c024_response_crafting_system.md"]
  - id: S044
    desc: "TASK 3 거래소 시스템 구현. MsgType 390-397. 핸들러 4개(AUCTION_LIST_REQ/REGISTER/BUY/BID) + 만료처리 + 일일골드캡 + 테스트 5개. 61/61 PASS."
    files: ["Servers/BridgeServer/_patch_s044.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py"]
  - id: S045
    desc: "C025 응답: TASK 3 거래소 완료 알림 + Phase 5 확인. 클라이언트 AuctionUI 연동 가능. 다음 TASK 15(비급) 착수 예정."
    files: ["_comms/server_to_client/S045_c025_response_auction_complete.md"]
  - id: S046
    desc: "C026 응답: TASK 15 비급&트라이포드 완료. MsgType 520-524. 핸들러3+TRIPOD_TABLE 24스킬+비급드롭/해금/도감. 66/66 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s046.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S046_c026_response_task15_tripod.md"]
  - id: S047
    desc: "C027 응답: TASK 16 현상금 시스템 완료. MsgType 530-537. 핸들러4(LIST/ACCEPT/COMPLETE/RANKING)+PvP현상금+토큰상점+일일생성. 71/71 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s047.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S047_c027_response_task16_bounty.md"]
  - id: S048
    desc: "C028 응답: TASK 4 퀘스트 심화 완료. MsgType 400-405. 핸들러3(DAILY_QUEST_LIST/WEEKLY_QUEST/REPUTATION)+일일풀8종+주간풀3종+평판2세력5티어. 75/75 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s048.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S048_c028_response_task4_quest_enhancement.md"]
  - id: S049
    desc: "C029 응답: TASK 7 칭호/도감/2차전직 완료. MsgType 440-447. 핸들러4(TITLE_LIST/TITLE_EQUIP/COLLECTION_QUERY/JOB_CHANGE)+칭호9종+도감4카테고리+5등급+전직6직업+마일스톤9레벨. 80/80 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s049.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S049_c029_response_task7_progression.md"]
  - id: S050
    desc: "C030 응답: TASK 8 보석/각인/초월 완료. MsgType 450-459. 핸들러5(GEM_EQUIP/GEM_FUSE/ENGRAVING_LIST/ENGRAVING_EQUIP/TRANSCEND)+보석6종5등급+각인9종3레벨+초월5단계+Pity(+5%/fail,max+50%). 85/85 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s050.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S050_c030_response_task8_enhancement.md"]
  - id: S051
    desc: "C031 응답: TASK 5 소셜 심화 완료. MsgType 410-422. 핸들러8(FRIEND_REQUEST/ACCEPT/REJECT/LIST+BLOCK/BLOCK_LIST+PARTY_FINDER_LIST/CREATE)+친구max100+차단max100+파티찾기5카테고리. 90/90 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s051.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S051_c031_response_task5_social.md"]
  - id: S052
    desc: "C032 응답: TASK 9 내구도/수리/리롤 완료. MsgType 462-467. 핸들러6+헬퍼5(REPAIR_REQ/REROLL_REQ/DURABILITY_QUERY/NOTIFY+take_hit/death)+인벤토리기반+랜덤옵션5타입+tier계산. 95/95 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s052.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S052_c032_response_task9_durability.md"]
  - id: S053
    desc: "C033 응답: TASK 6 전장/길드전/PvP시즌 완료. MsgType 430-435. 핸들러3+헬퍼4(BATTLEGROUND_QUEUE/SCORE/GUILD_WAR_DECLARE+bg_end_match/pvp_tier/soft_reset/season_reset). 전장2모드(거점점령+수레호위)+길드전(크리스탈10000HP)+PvP시즌7티어. 100/100 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s053.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S053_c033_response_task6_battleground.md"]
  - id: S054
    desc: "C034 응답: TASK 10 보조화폐/토큰상점 완료. MsgType 468-473. 핸들러3(CURRENCY_QUERY/TOKEN_SHOP_LIST/TOKEN_SHOP_BUY). 화폐5종(gold/silver/dungeon_token/pvp_token/guild_contribution)+토큰상점3종(던전4+PvP4+길드3)+토큰획득훅2(레이드→dt/전장→pt). 104/104 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s054.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S054_c034_response_task10_currency.md"]
  - id: S055
    desc: "C035 응답: TASK 17 비경탐험 완료. MsgType 540-544. 핸들러3(ENTER/COMPLETE/FAIL)+헬퍼3(_realm_grade/_realm_rewards/_check_special_realm)+포탈스폰. 비경5종(trial/wisdom/treasure/training/fortune)+특수4종(night_fog/storm_noon/snow_dawn/clear_evening)+등급S/A/B/C+일일3회. 108/108 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s055.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_gdd/data/secret_realm_conditions.yaml", "_comms/server_to_client/S055_c035_response_task17_secret_realm.md"]
  - id: S056
    desc: "C036 응답: TASK 18 사제시스템 완료. MsgType 550-560. 핸들러7(SEARCH/LIST/REQUEST/ACCEPT/QUEST_LIST/GRADUATE/SHOP_LIST/SHOP_BUY)+헬퍼4(contribution/exp_multiplier/mob_kill). 사부Lv40+/제자3max/제자Lv1~20/졸업Lv30. 퀘스트풀5종(사냥/던전/채집/탐험/보스)+기여도상점8종+EXP버프(파티+30%/솔로+10%)+졸업보상(사부500기여+10Kg/제자5Kg+10KEXP). 117/117 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s056.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S056_c036_response_task18_mentorship.md"]
  - id: S057
    desc: "C037 응답: TASK 11+12+13+14 한방 완료! GDD 서버 태스크 100% COMPLETE. TASK 11(캐시샵/배틀패스/이벤트/구독 474-489) 핸들러8+BP경험치. TASK 12(날씨/텔레포트/파괴오브젝트/탈것 490-501) 핸들러6+날씨시스템. TASK 13(출석보상/일일리셋/주간리셋/컨텐츠해금 502-509) 핸들러3+리셋헬퍼2. TASK 14(대화선택지/컷씬/챕터/메인퀘 510-517) 핸들러4+대화트리2+컷씬3+챕터4+메인퀘10. 142/142 ALL PASS."
    files: ["Servers/BridgeServer/_patch_s057.py", "Servers/BridgeServer/tcp_bridge.py", "Servers/BridgeServer/test_tcp_bridge.py", "_comms/server_to_client/S057_c037_response_task11_12_13_14_all_done.md"]
  - id: S058
    desc: "C038 응답: GDD 서버+클라 100% 마일스톤 확인! 서버87핸들러+142테스트 / 클라40매니저+30UI+115테스트. 다음 단계 논의: Unity 통합테스트(최우선), 밸런싱, 코드 품질, 엔티티 파이프라인 리뷰."
    files: ["_comms/server_to_client/S058_c038_response_gdd_100_complete_milestone.md"]

# ── 대기 중 (클라이언트 응답 필요) ──
blocked: []

# ── 다음 할 일 ──
pending_tasks:

  # ============================================================
  # TASK 2: 완료! (S042) — 제작/채집/요리/인챈트 56/56 PASS
  # ============================================================

  # ============================================================
  # TASK 3: 완료! (S044) — 거래소/일일캡 61/61 PASS
  # economy_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 4: 완료! (S048) — 퀘스트 심화 75/75 PASS
  # quest_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # TASK 5: 완료! (S051) — 소셜 심화 90/90 PASS
  # social_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # TASK 6: 완료! (S053) — 전장/길드전/PvP시즌 100/100 PASS
  # pvp_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # TASK 7: 완료! (S049) — 칭호/도감/전직 80/80 PASS
  # progression_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # TASK 8: 완료! (S050) — 보석/각인/초월 85/85 PASS
  # enhance_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 9: 완료! (S052) — 내구도/수리/리롤 95/95 PASS
  # durability_sub01~04 모두 완료
  # ============================================================

  # ============================================================
  # TASK 10: 완료! (S054) — 보조화폐/토큰상점 104/104 PASS
  # currency_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # TASK 15: 완료! (S046) — 비급&트라이포드 66/66 PASS
  # tripod_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 16: 완료! (S047) — 현상금 시스템 71/71 PASS
  # bounty_sub01~08 모두 완료
  # ============================================================

  # ============================================================
  # TASK 17: 완료! (S055) — 비경 탐험 108/108 PASS
  # realm_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 18: 완료! (S056) — 사제 시스템 117/117 PASS
  # mentor_sub01~07 모두 완료
  # ============================================================

  # ============================================================
  # ============================================================
  # === Phase 5 태스크 (GDD 전수 스캔으로 발굴) — ALL DONE! ===
  # ============================================================
  # ============================================================

  # ============================================================
  # TASK 11: 완료! (S057) — 캐시샵/배틀패스/이벤트/구독 142/142 PASS
  # shop_sub01~08 모두 완료
  # ============================================================

  # ============================================================
  # TASK 12: 완료! (S057) — 월드시스템(날씨/텔레포트/오브젝트/탈것) 142/142 PASS
  # world_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 13: 완료! (S057) — 출석/리셋/컨텐츠해금 142/142 PASS
  # login_sub01~06 모두 완료
  # ============================================================

  # ============================================================
  # TASK 14: 완료! (S057) — 스토리/대화/컷씬/챕터 142/142 PASS
  # narrative_sub01~05 모두 완료
  # ============================================================

  # ============================================================
  # 기존 유지 태스크
  # ============================================================
  - id: "respond_to_client"
    desc: "클라이언트 새 메시지에 응답 (inbox 스캔 후 자동 처리)"
    priority: P0
    blocked: false

  - id: "entity_pipeline_review"
    desc: "C016 엔티티 파이프라인 제안 상세 검토 (Phase 3 완료됨, 이제 검토 가능)"
    priority: P2
    blocked: false

  - id: "phase4_planning"
    desc: "Phase 4 계획 수립 — Unity Play 모드 통합 테스트 / 밸런싱 / 추가 컨텐츠"
    priority: P2
    blocked: false

  - id: "gdd_polish"
    desc: "GDD 서버 태스크 전부 done — 추후 밸런싱/폴리싱 대기"
    priority: P3
    blocked: true
    blocked_reason: "통합 테스트 + 대표님 피드백 후"

# ── 최근 중요 결정 ──
recent_decisions:
  - "D009: CEO 직접 지시 — 카메라는 탑다운 쿼터뷰(Lost Ark 스타일). TPS 숄더캠 X."
  - "D010: GDD 크로스파일 권위 기준 — 전문 파일이 권위 (flow.yaml=키바인딩, pvp.yaml=PvP수치 등)"
  - "스킬 8슬롯(QWERASDF) + V궁극기 + 1-4퀵슬롯 (Lost Ark 스타일)"
  - "엔티티 파이프라인 제안: 아이디어는 좋으나 현재 보류, Phase 2 후 검토"
  - "에셋 정책: SVG/코드=Git, FBX/텍스처/오디오=로컬 직접 배치"
  - "D011: GDD data/ CSV 5종 생성 — 서버/클라 에이전트가 파싱해서 사용"
  - "D012: OneDrive 동기화 문제로 _patch.py 사용 — Edit 도구 변경이 복원되는 이슈 우회"
  - "Phase 2 TCP 실연동 14/14 ALL PASS (2026-02-15) — 역사적인 첫 실연동"
  - "Phase 3 Guild/Trade/Mail TCP 연동 14/14 ALL PASS (2026-02-15) — 총 60/60"
  - "D013: GDD 심화 태스크 분해 — 10개 영역 55개 서브태스크 (제작/거래소/퀘스트심화/소셜/전장/칭호 + 보석각인초월/내구도수리/보조화폐)"
  - "Phase 3 PvP/Raid TCP 연동 20/20 ALL PASS (2026-02-15) — 총 80/80 ALL PASS. Phase 3 완전 완료!"
  - "D014: GDD 신규 4영역 25서브태스크 추가 분해 — 캐시샵/배틀패스(474-489), 월드시스템(490-501), 출석/리셋(502-509), 스토리/대화(510-517)"
  - "TASK 2 완료: 제작/채집/요리/인챈트(380-389) 56/56 PASS. _patch_s042.py. 레시피6종+채집3종+요리3종+인챈트6원소3단계."
  - "D015: 브레인스토밍 세션 — 4개 신규 시스템 GDD 추가: 비급&트라이포드(520-524), 강호 현상금(530-537), 비경 탐험(540-544), 사제 시스템(550-560)"
  - "신규 rules 4파일: tripod.yaml, bounty.yaml, secret_realm.yaml, mentorship.yaml"
  - "서버 TASK 15~18 추가: 비급(6sub) + 현상금(8sub) + 비경(6sub) + 사제(7sub) = 27개 서브태스크"
  - "TASK 3 완료: 거래소(390-397) 61/61 PASS. _patch_s044.py. 핸들러4(LIST/REGISTER/BUY/BID)+만료처리+일일캡. TAX:5%, FEE:100g, MAX:20건, 48h."
  - "클라 Phase 5 완료 확인: TASK 11-14 (474-517) 매니저7종+UI7종+패킷44종, 79 PASS"
  - "클라 Phase 6 거래소 완료: AuctionManager+AuctionUI, 37매니저 24UI 131패킷, 81 PASS"
  - "TASK 15 완료: 비급&트라이포드(520-524) 66/66 PASS. _patch_s046.py. TRIPOD_TABLE 24스킬*192옵션+비급드롭+해금+도감. 비급item_id=9000~9999."
  - "클라 TASK 15 완료: TripodManager+TripodUI, 83 PASS. T키 토글, 3티어 구조."
  - "TASK 16 완료: 현상금시스템(530-537) 71/71 PASS. _patch_s047.py. 핸들러4+PvP현상금+토큰상점. BOUNTY_ELITE_POOL3종+WORLD_BOSSES3종+PVP_TIERS4단계."
  - "클라 TASK 16 완료: BountyManager+BountyUI, 85 PASS. B키 토글, TCP 10건."
  - "TASK 4 완료: 퀘스트심화(400-405) 75/75 PASS. _patch_s048.py. 일일퀘풀8종+주간퀘풀3종+평판2세력5티어. DAILY_QUEST_MIN_LEVEL=5, WEEKLY_QUEST_MIN_LEVEL=15, REPUTATION_DAILY_CAP=500."
  - "클라 TASK 4 완료: DailyQuestManager+DailyQuestUI+ReputationManager+ReputationUI, 89 PASS. L키=일퀘, N키=평판."
  - "TASK 7 완료: 칭호/도감/2차전직(440-447) 80/80 PASS. _patch_s049.py. 칭호9종+도감(몬스터4카테고리+장비5등급)+전직6직업(berserker/guardian/sharpshooter/ranger/archmage/priest)+마일스톤9레벨. JOB_CHANGE_MIN_LEVEL=20."
  - "클라 TASK 7 완료: TitleManager+CollectionManager+TitleUI+CollectionUI+JobChangeUI, 93 PASS. H/F6/F7키."
  - "TASK 8 완료: 보석/각인/초월(450-459) 85/85 PASS. _patch_s050.py. 보석6종5등급(ruby/sapphire/emerald/diamond/topaz/amethyst)+각인9종3레벨(grudge/cursed_doll/keen_blunt/master_brawler/adrenaline/spirit_absorption/heavy_armor/expert/awakening)+초월5단계(50%/30%/20%/10%/5%)+Pity(+5%/fail,max+50%)."
  - "OneDrive tcp_bridge.py 잘림 이슈 발견/수정: _patch_s050.py에 git 원본 복구 로직 추가"
  - "TASK 5 완료: 소셜심화(410-422) 90/90 PASS. _patch_s051.py. 핸들러8개(FRIEND_REQUEST/ACCEPT/REJECT/LIST+BLOCK/BLOCK_LIST+PARTY_FINDER_LIST/CREATE). FRIEND_MAX=100, BLOCK_MAX=100, PARTY_FINDER_CATEGORIES 5종."
  - "클라 TASK 8 각인/초월 완료 확인: EngravingManager+EngravingUI+TranscendUI, 95 PASS."
  - "클라 TASK 5 소셜 완료 확인: FriendManager+BlockManager+PartyFinderManager+FriendUI+BlockUI+PartyFinderUI, 101 PASS."
  - "TASK 9 완료: 내구도/수리/리롤(462-467) 95/95 PASS. _patch_s052.py. 인벤토리기반 내구도(피격-0.1/사망-1.0)+수리(tier*dur_lost*5)+리롤(5000g+재감정서,1줄잠금10000g)+랜덤옵션5타입5풀."
  - "클라 TASK 9 내구도 완료 확인: DurabilityManager+RepairUI(F10)+RerollUI(F11), 103 PASS."
  - "TASK 6 완료: 전장/길드전/PvP시즌(430-435) 100/100 PASS. _patch_s053.py. 핸들러3(BATTLEGROUND_QUEUE/SCORE/GUILD_WAR_DECLARE)+헬퍼4. 전장2모드(거점점령:3거점win1000+수레호위:2페이즈)+길드전(min10/30분/크리스탈10000HP)+PvP시즌7티어(Bronze~GM/soft_reset). BG_TEAM_SIZE=6."
  - "클라 TASK 6 전장 완료 확인: BattlegroundManager+GuildWarManager+BattlegroundUI+GuildWarUI(F7/F8키), 107 PASS."
  - "TASK 10 완료: 보조화폐/토큰상점(468-473) 104/104 PASS. _patch_s054.py. 핸들러3(CURRENCY_QUERY/TOKEN_SHOP_LIST/TOKEN_SHOP_BUY). 화폐5종(gold:999M/silver:99M/dt:99K/pt:99K/gc:99K)+토큰상점3종(던전4+PvP4+길드3아이템)+토큰획득훅(레이드클리어→dt/전장종료→pt)."
  - "클라 TASK 10 보조화폐 완료 확인: CurrencyManager+CurrencyUI(F9)+TokenShopUI(Shift+F9), 109 PASS."
  - "TASK 17 완료: 비경탐험(540-544) 108/108 PASS. _patch_s055.py. 핸들러3(SECRET_REALM_ENTER/COMPLETE/FAIL)+헬퍼3(_realm_grade/_realm_rewards/_check_special_realm)+포탈스폰. 비경5종(trial/wisdom/treasure/training/fortune)+특수4종(night_fog x2.0/storm_noon x1.5/snow_dawn x1.5/clear_evening x1.5)+등급S/A/B/C+일일3회제한+Lv20+. secret_realm_conditions.yaml."
  - "TASK 18 완료: 사제시스템(550-560) 117/117 PASS. _patch_s056.py. 핸들러7(SEARCH/LIST/REQUEST/ACCEPT/QUEST_LIST/GRADUATE/SHOP_LIST/SHOP_BUY)+헬퍼4(contribution/exp_multiplier/mob_kill). 사부Lv40+/제자3max/Lv1~20/졸업Lv30. 퀘스트풀5종(사냥/던전/채집/탐험/보스)주3회+기여도상점8종+EXP버프(파티+30%/솔로+10%/사부share10%)+졸업보상(사부500기여+10Kg/제자5Kg+10KEXP)."
  - "클라 TASK 17 비경 완료 확인: SecretRealmManager+SecretRealmPortalUI+SecretRealmUI(F12), 111 PASS."
  - "클라 TASK 18 사제 완료 확인: MentorManager+MentorUI(Shift+M)+MentorShopUI, 113 PASS."
  - "TASK 11+12+13+14 한방 완료: _patch_s057.py. 캐시샵10종+BP50레벨+이벤트3종+구독(474-489), 날씨6종+텔포+파괴3종+탈것(490-501), 출석14일+일일/주간리셋+해금10레벨대(502-509), 대화선택지2NPC+컷씬3종+챕터4개+메인퀘10종(510-517). 142/142 ALL PASS. GDD 서버 태스크 100% COMPLETE!"
  - "GDD 서버+클라 100% MILESTONE 달성 (S058): 17개 TASK 양쪽 전부 DONE. 서버 87핸들러+142테스트, 클라 40매니저+30UI+115테스트. 다음: 대표님 결정 대기(Unity 통합테스트/밸런싱/리팩토링/추가 컨텐츠)."

# ── 처리된 클라이언트 메시지 ──
processed_messages:
  - "C001"
  - "C002"
  - "C003"
  - "C004"
  - "C005"
  - "C006"
  - "C007"
  - "C008"
  - "C009"
  - "C010"
  - "C011"
  - "C012"
  - "C013"
  - "C014"
  - "C015"
  - "C016"
  - "C017"
  - "C018"
  - "C019"
  - "C020"
  - "C021"
  - "C022"
  - "C023"
  - "C023_s041"
  - "C024"
  - "C025"
  - "C025_s042"
  - "C026"
  - "C027"
  - "C028"
  - "C029"
  - "C030"
  - "C031"
  - "C032"
  - "C033"
  - "C034"
  - "C035"
  - "C036"
  - "C037"
  - "C038"

# ── 핵심 규칙 (매 세션 리마인드) ──
rules:
  - "conversation_journal.json이 Single Source of Truth — 메시지 보내면 반드시 업데이트"
  - "GDD 변경 시 교차 일관성 확인 (D010 권위 기준 참조)"
  - "C++ 코드는 ECS 패턴 (Component=struct, System=ISystem)"
  - "클라이언트 메시지는 반드시 읽고 응답"
  - "state 파일 업데이트 필수 (컨텍스트 유실 방지)"
  - "conversation_style: 동료 개발자처럼 자연스럽게. 딱딱한 보고서 금지."
  - "대표님 결정 필요 시 _context/ask_user.yaml 사용"
  - "tcp_bridge.py 수정 시 _patch.py 사용 필수 (OneDrive 동기화 파일 복원 이슈)"

# ── 중요 참고: tcp_bridge.py 패칭 방법 ──
# OneDrive 동기화가 Edit 도구 변경을 되돌리는 문제가 있음
# Servers/BridgeServer/_patch.py를 사용하여 수정해야 함
# 실행: python _patch.py && python _patch_s034.py && python _patch_s035.py && python _patch_s036.py && python _patch_s037.py && python _patch_s040.py && python _patch_s042.py && python _patch_s044.py && python _patch_s046.py && python _patch_s047.py && python _patch_s048.py && python _patch_s049.py && python _patch_s050.py && python _patch_s051.py && python _patch_s052.py && python _patch_s053.py && python _patch_s054.py && python _patch_s055.py && python _patch_s056.py && python _patch_s057.py && python test_tcp_bridge.py
