# ============================================================
# Client Agent 영속 상태 — 세션 간 컨텍스트 유지용
# agent_loop.py가 Claude 실행 시 이 파일을 강제 주입
# 매 작업 완료 후 Claude가 이 파일을 업데이트
# ============================================================

agent: client
project_root: "C:\\Users\\명승호\\Desktop\\ECS"
last_session: "2026-02-14T22:55:00"

# ── 현재 상태 ──
current_status: "idle cycle — blocked task만 남아 대표님께 다음 작업 우선순위 질문 (ask_user Q001)"

# ── 완료된 작업 ──
completed:
  - id: A1
    desc: "TPS 숄더캠 (LocalPlayer.cs 전면 리라이트)"
    files: ["Assets/Scripts/Entity/LocalPlayer.cs"]
  - id: A2
    desc: "몬스터 월드 UI (MonsterWorldUI.cs + MonsterManager 연동)"
    files: ["Assets/Scripts/UI/MonsterWorldUI.cs", "Assets/Scripts/Managers/MonsterManager.cs"]
  - id: A3
    desc: "크로스헤어 (HUDManager.cs + ProjectSetup.cs)"
    files: ["Assets/Scripts/UI/HUDManager.cs", "Assets/Editor/ProjectSetup.cs"]
  - id: A4
    desc: "키바인드 가이드 (KeybindGuideUI.cs + ProjectSetup.cs)"
    files: ["Assets/Scripts/UI/KeybindGuideUI.cs"]
  - id: A5
    desc: "자동 퀘스트 수락 (GameBootstrap.cs)"
    files: ["Assets/Scripts/GameBootstrap.cs"]
  - id: A6
    desc: "환경 개선 (포그/앰비언트/바닥색)"
    files: ["Assets/Editor/ProjectSetup.cs"]
  - id: C016
    desc: "GDD 21개 파일 교차 검증 + 에이전트 파이프라인 제안 메시지"
    files: ["_comms/client_to_server/C016_gdd_review_and_agent_pipeline_proposal.md"]
  - id: C017
    desc: "Agent Loop 자율 시스템 구축 + 서버 세팅 가이드"
    files: ["_agent/agent_loop.py", "_agent/README.md", "_context/server_state_template.yaml", "_context/ask_user.yaml", "_comms/client_to_server/C017_agent_loop_system_ready.md"]
  - id: A7
    desc: "카메라 TPS→쿼터뷰 전환 (대표님 지시, camera.yaml 기반)"
    files: ["Assets/Scripts/Entity/LocalPlayer.cs"]
  - id: A8
    desc: "HUD ui.yaml 기반 리뉴얼 + 크로스헤어 제거"
    files: ["Assets/Scripts/UI/HUDManager.cs", "Assets/Editor/ProjectSetup.cs", "Assets/Scripts/UI/KeybindGuideUI.cs"]
  - id: C018
    desc: "S031 응답 — 카메라 전환 + HUD 리뉴얼 완료 보고"
    files: ["_comms/client_to_server/C018_s031_response_camera_converted_hud_renewed.md"]
  - id: A9
    desc: "animation.yaml 기반 Animator 확장 — 콤보4단/대시/피격/스킬/전투 상태"
    files: ["Assets/Editor/ProjectSetup.cs", "Assets/Scripts/Entity/LocalPlayer.cs", "Assets/Scripts/Entity/MonsterEntity.cs", "Assets/Scripts/Entity/RemotePlayer.cs", "Assets/Scripts/Managers/MonsterManager.cs"]
  - id: A10
    desc: "vfx.yaml 기반 HitVFXManager — 파티클 오브젝트 풀 (일반/크리티컬)"
    files: ["Assets/Scripts/Managers/HitVFXManager.cs", "Assets/Editor/ProjectSetup.cs", "Assets/Scripts/interaction-map.yaml"]
  - id: A11
    desc: "art_style.yaml 기반 URP 라이팅/포스트프로세싱 (포그/앰비언트/디렉셔널/볼륨)"
    files: ["Assets/Editor/ProjectSetup.cs"]

# ── 대기 중 (서버 응답 필요) ──
blocked: []

# ── 다음 할 일 (blocked 아닌 것부터) ──
pending_tasks:
  - id: "phase2_tcp"
    desc: "Phase 2 TCP 브릿지 연동 테스트 (서버 준비 후)"
    priority: P0
    blocked: true
    blocked_reason: "서버 에이전트가 TCP 브릿지 테스트 준비 완료해야"

# ── 최근 중요 결정 ──
recent_decisions:
  - "대표님 직접 지시: 카메라 탑다운 쿼터뷰 확정 (로아 스타일)"
  - "TPS 숄더캠 제거, camera.yaml 기반 쿼터뷰 구현"
  - "GDD 크로스파일 불일치 8건 서버에서 수정 완료"
  - "엔티티 파이프라인 제안 보류 (현재 YAML 구조 유지)"
  - "모든 코드는 validate_all.py --skip-unity 통과 필수"
  - "Agent Loop 시스템으로 자율 소통 체계 구축 완료"
  - "GDD 권위(Authority) 기준 정립 (flow.yaml=키바인딩, ui.yaml=UI, 등)"
  - "Animator 12파라미터/11상태 확장 (animation.yaml 기반 콤보/대시/피격/스킬)"
  - "HitVFXManager Reflection 기반 Volume 설정 (URP 직접 참조 대신)"
  - "크리티컬 판정 임시 기준: Damage>=50 (서버 IsCritical 필드 추가 전)"
  - "SSAO는 Renderer Feature이므로 Volume이 아닌 URP Asset 설정 필요 → 추후"

# ── 처리된 서버 메시지 ──
processed_messages:
  - "S001"
  - "S002"
  - "S003"
  - "S004"
  - "S005"
  - "S006"
  - "S007"
  - "S008"
  - "S009"
  - "S010"
  - "S011"
  - "S012"
  - "S013"
  - "S014"
  - "S015"
  - "S016"
  - "S017"
  - "S018"
  - "S019"
  - "S020"
  - "S021"
  - "S022"
  - "S023"
  - "S024"
  - "S025"
  - "S026"
  - "S027"
  - "S028"
  - "S029"
  - "S030"
  - "S031"

# ── 핵심 규칙 (매 세션 리마인드) ──
rules:
  - "Find/FindObjectOfType 런타임 사용 금지"
  - "모든 매니저는 싱글톤 패턴 + OnDestroy 이벤트 해제"
  - "Network 네임스페이스 클래스만 namespace Network 사용"
  - "작업 후 반드시 python validate_all.py --skip-unity 실행"
  - "Old Input System API만 사용 (New Input System 아님)"
  - "UI 스크립트는 UI/ 폴더, 매니저는 Managers/ 폴더"
