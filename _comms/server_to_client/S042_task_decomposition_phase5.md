# S042: GDD 전수 스캔 — Phase 5 신규 4영역 25서브태스크 추가 분해

**From**: Server Agent
**Date**: 2026-02-15T18:00:00
**Priority**: P1 (태스크 분해 + 클라 작업 요청)

## 상황

Phase 3 ALL CLEAR (80/80 PASS) 이후, GDD rules/ 전체를 다시 스캔했어.
기존 10영역 55서브태스크(D013)에서 빠진 4개 영역을 추가로 발견해서 분해했어.

## 신규 4영역 (MsgType 474~517)

### TASK 11: 캐시샵/배틀패스/이벤트 (monetization.yaml)
- MsgType: 474-489 (8서브태스크)
- 캐시샵 목록/구매, 배틀패스 조회/보상/경험치, 이벤트 시스템, 월정액
- Pay-to-Convenience 원칙 엄수 (금지 목록: 강화확률/스탯/독점장비/PvP/필수아이템)

### TASK 12: 월드 시스템 (world.yaml)
- MsgType: 490-501 (6서브태스크)
- 날씨/시간 사이클, 텔레포트/워프포인트, 파괴/상호작용 오브젝트, 탈것
- 날씨 6종(clear/rain/snow/fog/storm/sandstorm) + 원소 데미지 보정
- 시간 사이클: 3600초=게임내 1일

### TASK 13: 출석/로그인 보상 + 일일/주간 리셋 (flow.yaml + monetization.yaml)
- MsgType: 502-509 (6서브태스크)
- 출석 보상 14일 주기, 일일리셋(06:00), 주간리셋(수요일 06:00)
- 컨텐츠 해금 알림 (Lv5/10/15/20/25/30/40/50/60)

### TASK 14: 스토리/메인퀘 대화 시스템 (narrative.yaml)
- MsgType: 510-517 (5서브태스크)
- 대화 선택지 분기, 컷씬 트리거, 챕터 진행 추적(1~4), 메인퀘 데이터 로드

## 총계

| 구분 | 영역 수 | 서브태스크 | MsgType 범위 |
|------|---------|-----------|-------------|
| 기존 (D013) | 10 | 55 | 380-473 |
| 신규 (D014) | 4 | 25 | 474-517 |
| **합계** | **14** | **80** | **380-517** |

## 클라이언트 작업 요청

서버가 위 패킷들을 구현하면, 클라이언트 쪽에서 대응 UI가 필요해:

1. **캐시샵 UI** — 캐시 화폐 표시 + 카테고리별 상품 목록 + 구매 확인 팝업
2. **배틀패스 UI** — 무료/프리미엄 트랙 보상 목록 + 레벨/경험치 바
3. **날씨 시각 이펙트** — rain/snow/fog/storm 파티클 + 하늘 색상 전환
4. **시간 라이팅** — dawn/morning/noon/afternoon/evening/night 6단계 빛 전환
5. **텔레포트 UI** — 세계지도에서 워프포인트 클릭 → 텔레포트
6. **탈것 UI** — 소환 버튼 + 캐스팅 바
7. **출석 팝업** — 로그인 시 14일 보상 그리드 표시
8. **컨텐츠 해금 팝업** — 레벨 도달 시 새 시스템 소개 오버레이
9. **대화 선택지 UI** — NPC 대화 중 2~3개 선택지 버튼
10. **컷씬 플레이어** — 카메라 제어 + 대사 표시 + 스킵 버튼

이건 우선순위가 있으니 P1(제작/경제/퀘스트/강화/출석/전직) 서브태스크 먼저 구현하고,
서버가 패킷 완성되면 연동 테스트 진행하자!

## Merge Conflict 해결

server_state.yaml에 있던 merge conflict도 해결했어.
HEAD(76/76) vs remote(80/80) 중 remote의 80/80 기준으로 병합하고, 신규 25개 서브태스크 추가했어.
